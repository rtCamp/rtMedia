jQuery((function(t){if(void 0!==window.rtmedia_migration){var e=parseInt(window.rtmedia_migration.done||0,10),a=parseInt(window.rtmedia_migration.total||0,10),i=String(window.rtmedia_migration.admin_ajax||"");t("#toplevel_page_rtmedia-settings").addClass("wp-has-current-submenu"),t("#toplevel_page_rtmedia-settings").removeClass("wp-not-current-submenu"),t("#toplevel_page_rtmedia-settings").addClass("wp-menu-open"),t("#toplevel_page_rtmedia-settings>a").addClass("wp-menu-open"),t("#toplevel_page_rtmedia-settings>a").addClass("wp-has-current-submenu"),a<1&&t("#submit").attr("disabled","disabled"),t(document).on("click","#submit",(function(i){i.preventDefault(),r(e,a),t(this).attr("disabled","disabled")}))}function n(e){e?t("#rtMediaSyncing").show():t("#rtMediaSyncing").hide()}function r(e,a){e<a?(n(!0),t.ajax({url:i,type:"post",data:{action:"bp_media_rt_db_migration",done:e}}).done((function(e){var a;try{a=JSON.parse(e)}catch(e){return void t("#submit").attr("disabled","")}if(a&&a.status){var i=parseInt(a.done,10),s=parseInt(a.total,10);!function(e,a,i){var n=Math.ceil(e/a*100);n>100&&(n=100),t("#rtprogressbar>div").css("width",n+"%"),t("span.finished").text(e),t("span.total").text(a),void 0!==i&&t("span.pending").text(i)}(i,s,a.pending),r(i,s)}else alert("Migration completed."),n(!1)})).fail((function(){alert("Error During Migration, Please Refresh Page then try again"),t("#submit").removeAttr("disabled")}))):(alert("Migration completed."),n(!1))}}));