/*! 
 * rtMedia JavaScript Library 
 * @package rtMedia 
 */

"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(n,s){var r={init:function(e,t){var r=this;r.elem=t,r.$elem=n(t),r.options=n.extend({},n.fn.rtTab.options,e),r.rtTabs()},rtTabs:function(){var t=this,e=t.options.activeTab;if(t.$elem.find("li:nth-child("+e+")").addClass("active"),t.rtTabContent(activeTabContent="yes"),t.rtClick(),!0==("false"!==t.$elem.attr("data-hash"))){var r=s.location.hash;r&&t.$elem.find("li").find('a[href="'+r+'"]').trigger("click"),n(s).on("hashchange",function(){var e=s.location.hash;t.$elem.find("li").find('a[href="'+e+'"]').trigger("click")})}},rtClick:function(){var a=this,i=a.$elem.find("li");i.find("a").on("click",function(e){e.preventDefault(),i.removeClass("active"),a.rtTabContent(),n(this).parent().addClass("active");var t=n(this).attr("href");if(n(t).removeClass("hide"),!0==("false"!==a.$elem.attr("data-hash"))){var r=n(s).scrollTop();location.hash=n(this).attr("href"),n(s).scrollTop(r)}"function"==typeof a.options.onComplete&&a.options.onComplete.apply(a.elem,arguments)})},rtTabContent:function(r){this.$elem.find("li").find("a").each(function(){var e=n(this),t=e.attr("href");"yes"===r&&e.parent().hasClass("active")||n(t).addClass("hide")})}};n.fn.rtTab=function(t){return this.each(function(){var e=Object.create(r);e.init(t,this),n.data(this,"rtTab",e)})},n.fn.rtTab.options={activeTab:1,onComplete:null}}(jQuery,window,document),jQuery(document).ready(function(a){var e=document.createElement("div");e.setAttribute("class","rtm-warning rtm-fly-warning hide"),a(".rtm-tabs").rtTab(),a('input[name^="rtmedia-options"]').on("change",function(){a(".rtm-save-settings-msg").remove(),0===a(".rtm-fly-warning").length&&(e.innerText=rtmedia_admin_strings.settings_changed,a(".rtm-button-container.top").prepend(e),a(".rtm-fly-warning").slideDown())}),a(".rtm-img-size-setting .form-table tr:nth-child(7) td:last-child").attr("colspan","3"),a(".rtm-field-wrap .switch input[type=checkbox]").each(function(){var e=a(this);e.parents("table").attr("data-depends")||(e.is(":checked")?(e.parents("table").next(".rtm-notice").slideDown(),e.parents("table").siblings("table").each(function(){a(this).attr("data-depends")&&a(this).slideDown()})):(e.parents("table").next(".rtm-notice").slideUp(),e.parents("table").siblings("table").each(function(){a(this).attr("data-depends")&&a(this).slideUp()}))),e.parents("tr").next("tr").attr("data-depends")&&(e.is(":checked")?e.parents("tr").next("tr").slideDown():e.parents("tr").next("tr").slideUp())}),a(".rtm-field-wrap .switch input[type=checkbox]").on("change",function(){var e=a(this);e.parents("table").attr("data-depends")||(e.parents("table").next(".rtm-notice").slideToggle(),e.parents("table").siblings("table").each(function(){a(this).attr("data-depends")&&a(this).slideToggle()})),e.parents("tr").next("tr").attr("data-depends")&&e.parents("tr").next("tr").slideToggle()});new(Backbone.View.extend({el:a(".bp-media-admin"),events:{"click .rtm-theme":"render","click .rtm-close":"close","click .rtm-previous":"previousTheme","click .rtm-next":"nextTheme",keyup:"keyEvent"},initialize:function(){_.bindAll(this,"render","close","nextTheme","previousTheme","keyEvent"),this.keyEvent()},render:function(e){a(".rtm-theme").removeClass("rtm-modal-open");var t=a(e.currentTarget).addClass("rtm-modal-open").find(".rtm-theme-content").html();if(a(".rtm-theme-overlay")[0])a(".rtm-theme-overlay").show(),a(this.el).find(".rtm-theme-content-wrap").empty().append(t);else{var r={themeContent:t};a(this.el).append(rtMediaAdmin.templates.rtm_theme_overlay(r))}a(e.currentTarget).is(":first-child")?a(".rtm-previous").addClass("disabled"):a(e.currentTarget).is(":last-child")?a(".rtm-next").addClass("disabled"):a(".rtm-next, .rtm-previous").removeClass("disabled")},close:function(){a(".rtm-theme").removeClass("rtm-modal-open"),a(".rtm-theme-overlay").hide(),a(".rtm-next, .rtm-previous").removeClass("disabled")},nextTheme:function(e){return a(".rtm-next, .rtm-previous").removeClass("disabled"),a(".rtm-theme:last-child").hasClass("rtm-modal-open")&&a(e.currentTarget).addClass("disabled"),a(".rtm-modal-open").next().trigger("click"),!1},previousTheme:function(e){return a(".rtm-next, .rtm-previous").removeClass("disabled"),a(".rtm-theme:first-child").hasClass("rtm-modal-open")&&a(e.currentTarget).addClass("disabled"),a(".rtm-modal-open").prev().trigger("click"),!1},keyEvent:function(){a("body").on("keyup",function(e){return 39===e.keyCode?(a(".rtm-next, .rtm-previous").removeClass("disabled"),a(".rtm-theme:last-child").hasClass("rtm-modal-open")&&a(e.currentTarget).addClass("disabled"),a(".rtm-modal-open").next().trigger("click"),!1):37===e.keyCode?(a(".rtm-next, .rtm-previous").removeClass("disabled"),a(".rtm-theme:first-child").hasClass("rtm-modal-open")&&a(e.currentTarget).addClass("disabled"),a(".rtm-modal-open").prev().trigger("click"),!1):void(27===e.keyCode&&a(".rtm-close").trigger("click"))})}}));jQuery("#rtm-licenses .regular-text").each(function(){jQuery(this).keypress(function(e){if("13"==(e.keyCode?e.keyCode:e.which))return!1})}),jQuery("#bp_media_settings_form").on("submit",function(e){jQuery("#rtcss-notice").remove();var t=jQuery("#rtmedia-custom-css").val().match(/@import\s*(url)?\s*\(?([^;]+?)\)?;/);if(null!=t&&null!=t[0])return jQuery("#rtmedia-custom-css").after('<div id="rtcss-notice" class="error"><p>'+rtmedia_admin_strings.wrong_css_input+"</p></div>"),!1})});var rtMediaAdmin=new Object;function rtmedia_addon_do_not_show(){jQuery.post(rtmedia_admin_ajax,{action:"rtmedia_addon_popup_not_show_again"},function(e){jQuery("#TB_window").remove(),jQuery("#TB_overlay").remove()})}rtMediaAdmin.templates={rtm_image:wp.template("rtm-image"),rtm_msg_div:wp.template("rtm-msg-div"),rtm_album_favourites_importer:wp.template("rtm-album-favourites-importer"),rtm_map_mapping_failure:wp.template("rtm-map-mapping-failure"),rtm_p_tag:wp.template("rtm-p-tag"),rtm_theme_overlay:wp.template("rtm-theme-overlay")},jQuery(document).ready(function(v){var e=v("#rtm-licenses");0<e.length&&e.find(".license-inner:first input:first").focus();var t=document.createElement("div");function n(n){return jQuery.getJSON(ajaxurl,n,function(e){if(favorites=!1,e){var t=Math.ceil((5*parseInt(e.page)+parseInt(n.values.finished))/parseInt(n.values.total)*100);comments_total=jQuery("#bpmedia-bpalbumimporter .bp-album-comments span.total").html(),users_total=jQuery("#bpmedia-bpalbumimporter .bp-album-users span.total").html(),media_total=jQuery("#bpmedia-bpalbumimporter .bp-album-media span.total").html(),comments_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-comments span.finished").html(),users_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-users span.finished").html();var r=Math.ceil((parseInt(e.comments)+parseInt(comments_finished))/parseInt(comments_total)*100),a=Math.ceil(parseInt(e.users)/parseInt(users_total)*100);(100<t||100==t)&&(t=100,favorites=!0),jQuery(".bp-album-media #rtprogressbar>div").css("width",t+"%"),jQuery(".bp-album-comments #rtprogressbar>div").css("width",r+"%"),jQuery(".bp-album-users #rtprogressbar>div").css("width",a+"%"),media_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-media span.finished").html(),parseInt(media_finished)<parseInt(media_total)&&jQuery("#bpmedia-bpalbumimporter .bp-album-media span.finished").html(parseInt(media_finished)+n.count),jQuery("#bpmedia-bpalbumimporter .bp-album-comments span.finished").html(parseInt(e.comments)+parseInt(comments_finished)),jQuery("#bpmedia-bpalbumimporter .bp-album-users span.finished").html(parseInt(e.users)),favorites&&(favorite_data={action:"rtmedia_rt_album_import_favorites",rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},jQuery.post(ajaxurl,favorite_data,function(e){if(!e.hasOwnProperty(favorites)||0===e.favorites&&"0"===e.favorites)window.setTimeout(s,2e3);else{if(!jQuery(".bp-album-favorites").length){var t={users:e.users};jQuery(".bp-album-comments").after(rtMediaAdmin.templates.rtm_album_favourites_importer(t))}$favorites={},0!=e.offset||"0"!=e.offset?start=1*e.offset+1:start=1;for(var r=start;r<=e.users;r++)$count=1,r==e.users&&($count=parseInt(e.users%$count),0==$count&&($count=1)),newvals={action:"rtmedia_rt_album_import_step_favorites",offset:1*(r-1),redirect:r==e.users,rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},$favorites[r]=newvals;var a=jQuery.Deferred();a.resolve(),jQuery.each($favorites,function(e,t){a=a.pipe(function(){return function(e){return jQuery.post(ajaxurl,e,function(e){redirect=!1,favorites_total=jQuery("#bpmedia-bpalbumimporter .bp-album-favorites span.total").html(),favorites_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-favorites span.finished").html(),jQuery("#bpmedia-bpalbumimporter .bp-album-favorites span.finished").html(parseInt(favorites_finished)+1);var t=Math.ceil(parseInt(favorites_finished+1)/parseInt(favorites_total)*100);(100<t||100==t)&&(t=100,redirect=!0),jQuery(".bp-album-favorites #rtprogressbar>div").css("width",t+"%"),redirect&&window.setTimeout(s,2e3)})}(t)})})}},"json"))}else if(n.hasOwnProperty(page)){var i={msg:"Row "+e.page+" failed."};jQuery("#map_progress_msgs").html(rtMediaAdmin.templates.rtm_map_mapping_failure(i))}else{i={msg:rtmedia_admin_strings.request_failed};jQuery("#map_progress_msgs").html(rtMediaAdmin.templates.rtm_map_mapping_failure(i))}})}function s(){window.location=document.URL}t.className="support_form_loader",0<v(".rtm-save-settings-msg").length&&setTimeout(function(){v(".rtm-save-settings-msg").remove()},1e4),jQuery("#spread-the-word").on("click","#bp-media-add-linkback",function(){var e={action:"rtmedia_linkback",linkback:jQuery("#bp-media-add-linkback:checked").length};jQuery.post(rtmedia_admin_ajax,e,function(e){})}),jQuery("#bp-media-settings-boxes").on("change","#select-request",function(){if(jQuery(this).val()){jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(),jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(t);var e={action:"rtmedia_select_request",form:jQuery(this).val()};jQuery.post(ajaxurl,e,function(e){jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(),jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(e).fadeIn("slow")})}}),jQuery("#bp-media-settings-boxes").on("click","#cancel-request",function(){if(jQuery(this).val()){jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(),jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(t);jQuery.post(ajaxurl,{action:"rtmedia_cancel_request"},function(e){jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(),jQuery("#bp_media_settings_form .bp-media-metabox-holder").html(e).fadeIn("slow")})}}),jQuery("#bp-media-settings-boxes").on("submit","#bp_media_settings_form, .rtmedia-settings-submit",function(e){var t=!0,r=new RegExp("^[0-9]+$");jQuery("input[name*='defaultSizes']").each(function(e){if(!r.test(jQuery(this).val()))return alert("Invalid value for "+jQuery(this).attr("name").replace("rtmedia-options[defaultSizes_","").replace("]","").replace(/_/g," ").replace(/(\b)([a-zA-Z] )/g,function(e){return e.toUpperCase()})),t=!1});var a=jQuery('input[name^="rtmedia-options[general_videothumbs]"]');if(t&&0<a.length&&void 0!==a){var i="",n=0;if(a.val()<=0?(i+=rtmedia_admin_strings.video_thumbnail_error,n=2):r.test(a.val())||(i+=rtmedia_admin_strings.video_thumbnail_invalid_value+" "+Math.round(a.val())+".",n=Math.round(a.val())),""!=i)return alert(i),a.val(n),t=!1}var s=jQuery('input[name^="rtmedia-options[general_jpeg_image_quality]"]');if(t&&0<s.length&&void 0!==s){i="";var o=0;if(s.val()<=0?(i+=rtmedia_admin_strings.jpeg_quality_negative_error,o=90):100<s.val()?(i+=rtmedia_admin_strings.jpeg_quality_percentage_error,o=100):r.test(s.val())||(i+=rtmedia_admin_strings.jpeg_quality_invalid_value+" "+Math.round(s.val())+".",o=Math.round(s.val())),""!=i)return alert(i),s.val(o),t=!1}var m=jQuery('input[name^="rtmedia-options[general_perPageMedia]"]');if(t&&0<m.length&&void 0!==m){i="";var u=0;if(m.val()<1?(i+=rtmedia_admin_strings.per_page_media_negative_value,u=10):jQuery.isNumeric(m.val())&&Math.floor(m.val())!=m.val()&&(i+=rtmedia_admin_strings.per_page_media_positive_error+" "+Math.round(m.val())+".",u=Math.round(m.val())),""!=i)return alert(i),m.val(u),t=!1}t||e.preventDefault()}),jQuery(document).on("click","#bpm-services .encoding-try-now,#rtm-services .encoding-try-now",function(e){if(e.preventDefault(),confirm(rtmedia_admin_strings.are_you_sure)){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t));t={action:"rtmedia_free_encoding_subscribe"};jQuery.getJSON(ajaxurl,t,function(e){if(void 0===e.error&&e.apikey){var t=window.location.href,r=window.location.hash;t=t.replace(r,""),document.location.href=t+"&apikey="+e.apikey+r}else{jQuery(".encoding-try-now").next().remove(),jQuery("#settings-error-encoding-error").remove();var a={id:"settings-error-encoding-error",msg:e.error,class:"error"};jQuery("#bp-media-settings-boxes").before(rtMediaAdmin.templates.rtm_msg_div(a))}})}}),jQuery(document).on("click","#api-key-submit",function(e){if(e.preventDefault(),0==jQuery(this).next("img").length){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t))}t={action:"rtmedia_enter_api_key",apikey:jQuery("#new-api-key").val()};jQuery.getJSON(ajaxurl,t,function(e){if(void 0===e.error&&e.apikey){var t=window.location.href,r=window.location.hash;-1==(t=t.replace(r,"")).toString().indexOf("&apikey="+e.apikey)&&(t+="&apikey="+e.apikey),-1==t.toString().indexOf("&update=true")&&(t+="&update=true"),document.location.href=t+r}else{jQuery("#settings-error-api-key-error").remove();var a={id:"settings-error-api-key-error",msg:e.error,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(a))}jQuery("#api-key-submit").next("img").remove()})}),jQuery(document).on("click","#disable-encoding",function(e){if(e.preventDefault(),confirm(rtmedia_admin_strings.disable_encoding)){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t));t={action:"rtmedia_disable_encoding"};jQuery.post(ajaxurl,t,function(e){if(e){if(jQuery(".settings-error-encoding-disabled").remove(),0<jQuery("#settings-encoding-successfully-updated").length)jQuery("#settings-encoding-successfully-updated p").html(e);else{var t={id:"settings-encoding-successfully-updated",msg:e,class:"updated"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}jQuery("#rtmedia-encoding-usage").hide(),jQuery("#disable-encoding").next("img").remove(),jQuery("#disable-encoding").hide(),jQuery("#enable-encoding").show()}else{jQuery("#settings-error-encoding-disabled").remove();t={id:"settings-error-encoding-disabled",msg:rtmedia_admin_strings.something_went_wrong,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}})}}),jQuery(document).on("click","#enable-encoding",function(e){if(e.preventDefault(),confirm(rtmedia_admin_strings.enable_encoding)){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t));t={action:"rtmedia_enable_encoding"};jQuery.post(ajaxurl,t,function(e){if(e){if(jQuery(".settings-error-encoding-enabled").remove(),0<jQuery("#settings-encoding-successfully-updated").length)jQuery("#settings-encoding-successfully-updated p").html(e);else{var t={id:"settings-encoding-successfully-updated",msg:e,class:"updated"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}jQuery("#enable-encoding").next("img").remove(),jQuery("#enable-encoding").hide(),jQuery("#disable-encoding").show()}else{jQuery("#settings-error-encoding-disabled").remove();t={id:"settings-error-encoding-enabled",msg:rtmedia_admin_strings.something_went_wrong,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}})}}),jQuery(".bp-media-encoding-table").on("click",".bpm-unsubscribe",function(e){e.preventDefault(),jQuery("#bpm-unsubscribe-dialog").dialog({dialogClass:"wp-dialog",modal:!0,buttons:{Unsubscribe:function(){jQuery(this).dialog("close");var e={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(".bpm-unsubscribe").after(rtMediaAdmin.templates.rtm_image(e));e={action:"rtmedia_unsubscribe_encoding_service",note:jQuery("#bpm-unsubscribe-note").val(),plan:jQuery(".bpm-unsubscribe").attr("data-plan"),price:jQuery(".bpm-unsubscribe").attr("data-price")};jQuery.getJSON(ajaxurl,e,function(e){if(void 0===e.error&&e.updated){jQuery(".bpm-unsubscribe").next().remove(),jQuery(".bpm-unsubscribe").after(e.form),jQuery(".bpm-unsubscribe").remove(),jQuery("#settings-unsubscribed-successfully").remove(),jQuery("#settings-unsubscribe-error").remove();var t={id:"settings-unsubscribed-successfully",msg:e.updated,class:"updated"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t)),window.location.hash="#settings-unsubscribed-successfully"}else{jQuery(".bpm-unsubscribe").next().remove(),jQuery("#settings-unsubscribed-successfully").remove(),jQuery("#settings-unsubscribe-error").remove();t={id:"settings-unsubscribe-error",msg:e.error,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t)),window.location.hash="#settings-unsubscribe-error"}})}}})}),jQuery("#bpmedia-bpalbumimporter").on("change","#bp-album-import-accept",function(){jQuery(".bp-album-import-accept").toggleClass("i-accept"),jQuery(".bp-album-importer-wizard").slideToggle()}),jQuery("#rtprivacyinstall").click(function(e){e.preventDefault(),$progress_parent=jQuery("#rtprivacyinstaller"),$progress_parent.find(".rtprivacytype").each(function(){if($type=jQuery(this).attr("id"),"total"==$type){$values=[],jQuery(this).find("input").each(function(){$values[jQuery(this).attr("name")]=[jQuery(this).val()]}),$data={};for(var e=1;e<=$values.steps[0];e++)$count=20,e==$values.steps[0]&&($count=parseInt($values.laststep[0]),0==$count&&($count=20)),newvals={page:e,action:"rtmedia_privacy_install",count:$count,values:$values},$data[e]=newvals;var r=jQuery.Deferred();r.resolve(),jQuery.each($data,function(e,t){r=r.pipe(function(){return function(i){return jQuery.post(ajaxurl,i,function(e){if(0!=e){var t=!1,r=Math.ceil((20*parseInt(e)+parseInt(i.values.finished))/parseInt(i.values.total)*100);100<r&&(r=100,t=!0),jQuery("#rtprogressbar>div").css("width",r+"%"),finished=jQuery("#rtprivacyinstaller span.finished").html(),jQuery("#rtprivacyinstaller span.finished").html(parseInt(finished)+i.count),t&&jQuery.post(ajaxurl,{action:"rtmedia_privacy_redirect"},function(e){window.location=settings_url})}else{var a={msg:"Row "+e+" failed."};jQuery("#map_progress_msgs").html(rtMediaAdmin.templates.rtm_map_mapping_failure(a))}})}(t)})})}})}),jQuery("#bpmedia-bpalbumimport-cleanup").click(function(e){e.preventDefault(),jQuery.post(ajaxurl,{action:"rtmedia_rt_album_cleanup",rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},function(e){window.location=settings_rt_album_import_url})}),jQuery("#bpmedia-bpalbumimporter").on("click","#bpmedia-bpalbumimport",function(e){if(e.preventDefault(),jQuery("#bp-album-import-accept").prop("checked")){if(jQuery(this).prop("disabled",!0),wp_admin_url=ajaxurl.replace("admin-ajax.php",""),!jQuery(".bpm-ajax-loader").length){var t={src:rtmedia_admin_url+"images/wpspin_light.gif",class:"bpm-ajax-loader",norefresh:rtmedia_admin_strings.no_refresh};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t))}$progress_parent=jQuery("#bpmedia-bpalbumimport"),$values=[],jQuery(this).parent().find("input").each(function(){$values[jQuery(this).attr("name")]=[jQuery(this).val()]}),0==$values.steps[0]&&($values.steps[0]=1),$data={};for(i=1;i<=$values.steps[0];i++)$count=5,i==$values.steps[0]&&($count=parseInt($values.laststep[0]),0==$count&&($count=5)),newvals={page:i,action:"rtmedia_rt_album_import",count:$count,values:$values,rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},$data[i]=newvals;var r=jQuery.Deferred();r.resolve(),jQuery.each($data,function(e,t){r=r.pipe(function(){return n(t)})})}else{jQuery("html, body").animate({scrollTop:jQuery("#bp-album-import-accept").offset().top},500);var a=jQuery(".bp-album-import-accept"),i=3;(function e(){a.css("background-color","#EE0000"),setTimeout(function(){a.css("background-color","#FFEBE8"),--i&&setTimeout(e,500)},500)})()}}),jQuery("#bp-media-settings-boxes").on("click",".interested",function(){jQuery(".interested-container").removeClass("hidden"),jQuery(".choice-free").attr("required","required")}),jQuery("#bp-media-settings-boxes").on("click",".not-interested",function(){jQuery(".interested-container").addClass("hidden"),jQuery(".choice-free").removeAttr("required")}),jQuery("#video-transcoding-main-container").on("click",".video-transcoding-survey",function(e){e.preventDefault();var t={action:"rtmedia_convert_videos_form",email:jQuery(".email").val(),url:jQuery(".url").val(),choice:jQuery('input[name="choice"]:checked').val(),interested:jQuery('input[name="interested"]:checked').val()};return jQuery.post(ajaxurl,t,function(e){var t={msg:e,strong:"yes"};jQuery("#video-transcoding-main-container").html(rtMediaAdmin.templates.rtm_p_tag(t))}),!1}),jQuery("#bpmedia-bpalbumimporter").on("click",".deactivate-bp-album",function(e){e.preventDefault(),$bpalbum=jQuery(this);var t={action:"rtmedia_rt_album_deactivate",rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()};jQuery.get(ajaxurl,t,function(e){if(e)location.reload();else{var t={msg:rtmedia_admin_strings.something_went_wrong};$bpalbum.parent().after(rtMediaAdmin.templates.rtm_p_tag(t))}})}),jQuery(".updated").on("click",".bpm-hide-encoding-notice",function(){var e={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(e));e={action:"rtmedia_hide_encoding_notice"};jQuery.post(ajaxurl,e,function(e){e&&jQuery(".bpm-hide-encoding-notice").closest(".updated").remove()})}),jQuery("#rtmedia-bp-enable-activity").is(":checked")?jQuery(".rtmedia-bp-activity-setting").prop("readonly",!1):jQuery(".rtmedia-bp-activity-setting").prop("readonly",!0),jQuery("#rtmedia-bp-enable-activity").on("click",function(e){jQuery(this).is(":checked")?jQuery(".rtmedia-bp-activity-setting").prop("readonly",!1):jQuery(".rtmedia-bp-activity-setting").prop("readonly",!0)});var a;void 0!==rtmedia_on_label&&rtmedia_on_label,void 0!==rtmedia_off_label&&rtmedia_off_label,jQuery("input[type=file]").on("change",function(e){a=e.target.files,function(e){e.stopPropagation(),e.preventDefault();var r=new FormData;void 0!==e&&void 0!==e.target&&void 0!==e.target.name&&"rtFileInput"===e.target.name&&r.append("import_export_control",e.target.name);jQuery.each(a,function(e,t){r.append(e,t)});var t=jQuery("#rtmedia_admin_upload_nonce").val();void 0!==t&&""!==t&&r.append("rtmedia_admin_upload_nonce",t);r.append("action","rtmedia_admin_upload"),jQuery.ajax({url:rtmedia_admin_ajax,type:"POST",data:r,cache:!1,processData:!1,contentType:!1,success:function(e){if(e.hasOwnProperty("rtm_response")&&e.hasOwnProperty("rtm_response_msg")){jQuery("#rtm-setting-msg").remove();var t=jQuery("<div/>",{id:"rtm-setting-msg",class:"rtm-fly-warning"});"success"===e.rtm_response?(t.addClass("rtm-success rtm-save-settings-msg"),t.text(e.rtm_response_msg),jQuery(".rtm-button-container.top").append(t),location.reload()):"error"===e.rtm_response&&(t.addClass("rtm-warning"),t.text(e.rtm_response_msg),jQuery(".rtm-button-container.top").append(t),t.delay(3e3).fadeOut(100))}if(void 0===e.error){if(e.exceed_size_msg)return jQuery("#debuglog").val(""),alert(e.exceed_size_msg),!1;jQuery("#debuglog_temp_path").val(e.debug_attachmanet)}else jQuery("#debuglog").val(""),alert("ERRORS: "+e.error)}})}(e)}),jQuery("#rtmedia-submit-request").click(function(){var e=jQuery("#name").val(),t=jQuery("#email").val(),r=jQuery("#website").val(),a=jQuery("#subject").val(),i=jQuery("#details").val(),n=jQuery('input[name="request_type"]').val(),s=jQuery('input[name="request_id"]').val(),o=jQuery('input[name="server_address"]').val(),m=jQuery('input[name="ip_address"]').val(),u=jQuery('input[name="server_type"]').val(),d=jQuery('input[name="user_agent"]').val(),l={name:e,email:t,website:r,subject:a,details:i,request_id:s,request_type:"premium_support",server_address:o,ip_address:m,server_type:u,user_agent:d,debuglog_temp_path:jQuery('input[name="debuglog_temp_path"]').val()};if("bug_report"==n){var p=jQuery("#wp_admin_username").val();if(""==p)return alert(rtmedia_admin_support_strings.wp_admin_username_error),!1;var c=jQuery("#wp_admin_pwd").val();if(""==c)return alert(rtmedia_admin_support_strings.wp_admin_pwd_error),!1;var _=jQuery("#ssh_ftp_host").val();if(""==_)return alert(rtmedia_admin_support_strings.ssh_ftp_host_error),!1;var f=jQuery("#ssh_ftp_username").val();if(""==f)return alert(rtmedia_admin_support_strings.ssh_ftp_username_error),!1;var b=jQuery("#ssh_ftp_pwd").val();if(""==b)return alert(rtmedia_admin_support_strings.ssh_ftp_pwd_error),!1;l={name:e,email:t,website:r,subject:a,details:i,request_id:s,request_type:"premium_support",server_address:o,ip_address:m,server_type:u,user_agent:d,wp_admin_username:p,wp_admin_pwd:c,ssh_ftp_host:_,ssh_ftp_username:f,ssh_ftp_pwd:b}}for(formdata in l){if(""==l[formdata]&&"debuglog_temp_path"!=formdata)return alert("Please enter "+formdata.replace("_"," ")+" field."),!1;if(""==l[formdata]&&"debuglog_temp_path"==formdata)return alert("Please upload attachment."),!1}return data={action:"rtmedia_submit_request",form_data:l,support_wpnonce:jQuery("#support_wpnonce").val()},jQuery.post(ajaxurl,data,function(e){if("false"==(e=e.trim()))return alert(rtmedia_admin_support_strings.all_fields_error),!1;v("#rtmedia_service_contact_container").empty(),v("#rtmedia_service_contact_container").append(e)}),!1}),jQuery("#cancel-request").click(function(){return!1}),jQuery(".rtm_enable_masonry_view input[type=checkbox]").is(":checked")?jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").show():jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").hide(),jQuery(".rtm_enable_masonry_view input[type=checkbox]").on("click",function(e){jQuery(this).is(":checked")?jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").show():jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").hide()}),jQuery("#rtm-masonry-change-thumbnail-info").click(function(e){jQuery("html, body").animate({scrollTop:0},"500","swing")}),jQuery("#rtm-export-button").click(function(){data={action:"rtmedia_export_settings"},jQuery.post(ajaxurl,data,function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","rtm-settings.json"),jQuery("body").append(r),r.click(),r.remove()})}),jQuery("#rtm-export-data-button").click(function(){window.location.href="/wp-admin/tools.php?page=export_personal_data"}),jQuery("#rtm-erase-data-button").click(function(){window.location.href="/wp-admin/tools.php?page=remove_personal_data"})}),jQuery(window).load(function(){jQuery(".rtmedia-addon-thickbox").trigger("click")});