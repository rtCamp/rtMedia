jQuery(document).ready((function(e){var t=document.createElement("div");t.setAttribute("class","rtm-warning rtm-fly-warning hide"),e(".rtm-tabs").rtTab(),e('input[name^="rtmedia-options"]').on("change",(function(){e(".rtm-save-settings-msg").remove(),0===e(".rtm-fly-warning").length&&(t.innerText=rtmedia_admin_strings.settings_changed,e(".rtm-button-container.top").prepend(t),e(".rtm-fly-warning").slideDown())})),e(".rtm-img-size-setting .form-table tr:nth-child(7) td:last-child").attr("colspan","3"),e(".rtm-field-wrap .switch input[type=checkbox]").each((function(){var t=e(this);t.parents("table").attr("data-depends")||(t.is(":checked")?(t.parents("table").next(".rtm-notice").slideDown(),t.parents("table").siblings("table").each((function(){e(this).attr("data-depends")&&e(this).slideDown()}))):(t.parents("table").next(".rtm-notice").slideUp(),t.parents("table").siblings("table").each((function(){e(this).attr("data-depends")&&e(this).slideUp()})))),t.parents("tr").next("tr").attr("data-depends")&&(t.is(":checked")?t.parents("tr").next("tr").slideDown():t.parents("tr").next("tr").slideUp())})),e(".rtm-field-wrap .switch input[type=checkbox]").on("change",(function(){var t=e(this);t.parents("table").attr("data-depends")||(t.parents("table").next(".rtm-notice").slideToggle(),t.parents("table").siblings("table").each((function(){e(this).attr("data-depends")&&e(this).slideToggle()}))),t.parents("tr").next("tr").attr("data-depends")&&t.parents("tr").next("tr").slideToggle()}));new(Backbone.View.extend({el:e(".bp-media-admin"),events:{"click .rtm-theme":"render","click .rtm-close":"close","click .rtm-previous":"previousTheme","click .rtm-next":"nextTheme",keyup:"keyEvent"},initialize:function(){_.bindAll(this,"render","close","nextTheme","previousTheme","keyEvent"),this.keyEvent()},render:function(t){e(".rtm-theme").removeClass("rtm-modal-open");var r=e(t.currentTarget).addClass("rtm-modal-open").find(".rtm-theme-content").html();if(e(".rtm-theme-overlay")[0])e(".rtm-theme-overlay").show(),e(this.el).find(".rtm-theme-content-wrap").empty().append(r);else{var a={themeContent:r};e(this.el).append(rtMediaAdmin.templates.rtm_theme_overlay(a))}e(t.currentTarget).is(":first-child")?e(".rtm-previous").addClass("disabled"):e(t.currentTarget).is(":last-child")?e(".rtm-next").addClass("disabled"):e(".rtm-next, .rtm-previous").removeClass("disabled")},close:function(){e(".rtm-theme").removeClass("rtm-modal-open"),e(".rtm-theme-overlay").hide(),e(".rtm-next, .rtm-previous").removeClass("disabled")},nextTheme:function(t){return e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:last-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").next().trigger("click"),!1},previousTheme:function(t){return e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:first-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").prev().trigger("click"),!1},keyEvent:function(){e("body").on("keyup",(function(t){return 39===t.keyCode?(e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:last-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").next().trigger("click"),!1):37===t.keyCode?(e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:first-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").prev().trigger("click"),!1):void(27===t.keyCode&&e(".rtm-close").trigger("click"))}))}}));jQuery("#rtm-licenses .regular-text").each((function(){jQuery(this).keypress((function(e){if("13"==(e.keyCode?e.keyCode:e.which))return!1}))})),jQuery("#bp_media_settings_form").on("submit",(function(e){jQuery("#rtcss-notice").remove();var t=jQuery("#rtmedia-custom-css").val().match(/@import\s*(url)?\s*\(?([^;]+?)\)?;/);if(null!=t&&null!=t[0])return jQuery("#rtmedia-custom-css").after('<div id="rtcss-notice" class="error"><p>'+rtmedia_admin_strings.wrong_css_input+"</p></div>"),!1}))}));var rtMediaAdmin=new Object;function rtmedia_addon_do_not_show(){jQuery.post(rtmedia_admin_ajax,{action:"rtmedia_addon_popup_not_show_again"},(function(e){jQuery("#TB_window").remove(),jQuery("#TB_overlay").remove()}))}rtMediaAdmin.templates={rtm_image:wp.template("rtm-image"),rtm_msg_div:wp.template("rtm-msg-div"),rtm_album_favourites_importer:wp.template("rtm-album-favourites-importer"),rtm_map_mapping_failure:wp.template("rtm-map-mapping-failure"),rtm_p_tag:wp.template("rtm-p-tag"),rtm_theme_overlay:wp.template("rtm-theme-overlay")},jQuery(document).ready((function(e){if("object"==typeof rtmedia_admin)for(var t in rtmedia_admin)window[t]=rtmedia_admin[t];var r=e("#bp-media-settings-boxes"),a=e("#bp_media_settings_form .bp-media-metabox-holder"),i=e("#rtm-licenses");i.length>0&&i.find(".license-inner:first input:first").focus();var n=document.createElement("div");function s(){window.location=document.URL}n.className="support_form_loader",e(".rtm-save-settings-msg").length>0&&setTimeout((function(){e(".rtm-save-settings-msg").remove()}),1e4),jQuery("#spread-the-word").on("click","#bp-media-add-linkback",(function(){var e={action:"rtmedia_linkback",linkback:jQuery("#bp-media-add-linkback:checked").length};jQuery.post(rtmedia_admin_ajax,e,(function(e){}))})),r.on("change","#select-request",(function(){if(jQuery(this).val()){a.html(n);var e={action:"rtmedia_select_request",form:jQuery(this).val()};jQuery.post(ajaxurl,e,(function(e){a.html(e).fadeIn("slow")}))}})),r.on("click","#cancel-request",(function(){if(jQuery(this).val()){a.html(),a.html(n);jQuery.post(ajaxurl,{action:"rtmedia_cancel_request"},(function(e){a.html(),a.html(e).fadeIn("slow")}))}})),jQuery(".rtmedia-settings-submit").on("click",(function(t){var r=e(".rtm-content");r.each((function(){e(this).removeClass("hide")}));var a=e("#bp_media_settings_form")[0].checkValidity(),i=e('input[name="rtmedia-options[general_albumsPerUser]"]');if(""==i.val()&&i.val(0),!1===a){var n=e(":invalid"),s=n.closest(".rtm-content").addClass("active");r.each((function(){e(this).attr("id")!==s.attr("id")&&e(this).addClass("hide")}));var o=n.closest(".form-table");if("none"===o.css("display")&&"general_enableSitemap"===o.attr("data-depends"))return n.val(10),void e(".rtmedia-settings-submit").trigger("click");var m="#"+s.attr("id");e(location).attr("href",m)}else{var d=e(location).attr("href"),u=d.substring(d.lastIndexOf("#")+1);r.each((function(){e(this).attr("id")!==u&&e(this).addClass("hide")}))}})),r.on("submit","#bp_media_settings_form, .rtmedia-settings-submit",(function(t){var r=!0,a=new RegExp("^[0-9]+$"),i="";e("input[name*='defaultSizes']").each((function(){var r=e(this);if(r.css("border-color","#7e8993").next(".error_msg").remove(),!a.test(r.val())){var i=r.attr("name");i=(i=(i=i.replace("rtmedia-options[defaultSizes_","")).replace("]","")).replace(/_/g," ");var n=RTMedia_Admin_Settings_JS.rtmedia_default_sizes_error_message;n=n.replace("[default_size_property]",i);var s=r.parents(".rtm-content").attr("id");return 0<s.length&&e("#tab-"+s).click(),t.preventDefault(),m(r,n)}}));var n=jQuery('input[name^="rtmedia-options[general_videothumbs]"]');if(r&&n.length>0&&void 0!==n){i="";var s=0;if(n.val()<=0?(i+=rtmedia_admin_strings.video_thumbnail_error,s=2):a.test(n.val())||(i+=rtmedia_admin_strings.video_thumbnail_invalid_value+" "+Math.round(n.val())+".",s=Math.round(n.val())),""!==i)return alert(i),n.val(s),r=!1,!1}var o=jQuery('input[name^="rtmedia-options[general_jpeg_image_quality]"]');if(r&&1===o.length&&void 0!==o&&(o.val()<=0?i+=rtmedia_admin_strings.jpeg_quality_negative_error:o.val()>100?i+=rtmedia_admin_strings.jpeg_quality_percentage_error:a.test(o.val())||(i+=rtmedia_admin_strings.jpeg_quality_invalid_value+" "+Math.round(o.val())+"."),""!==i)){o.next(".error_msg").remove();var d=o.parents(".rtm-content").attr("id");return 0<d.length&&e("#tab-"+d).click(),m(o,i)}var u=jQuery('input[name^="rtmedia-options[general_perPageMedia]"]');if(r&&1===u.length&&void 0!==u&&(1>u.val()?i+=rtmedia_admin_strings.per_page_media_negative_value:jQuery.isNumeric(u.val())&&Math.floor(u.val())!=u.val()&&(i+=rtmedia_admin_strings.per_page_media_positive_error+" "+Math.round(u.val())+"."),""!==i)){u.next(".error_msg").remove();var l=u.parents(".rtm-content").attr("id");return 0<l.length&&e("#tab-"+l).click(),m(u,i)}r||t.preventDefault()})),jQuery(document).on("click","#bpm-services .encoding-try-now,#rtm-services .encoding-try-now",(function(e){if(e.preventDefault(),confirm(rtmedia_admin_strings.are_you_sure)){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t));t={action:"rtmedia_free_encoding_subscribe"};jQuery.getJSON(ajaxurl,t,(function(e){if(void 0===e.error&&e.apikey){var t=window.location.href,a=window.location.hash;t=t.replace(a,""),document.location.href=t+"&apikey="+e.apikey+a}else{jQuery(".encoding-try-now").next().remove(),jQuery("#settings-error-encoding-error").remove();var i={id:"settings-error-encoding-error",msg:e.error,class:"error"};r.before(rtMediaAdmin.templates.rtm_msg_div(i))}}))}})),jQuery(document).on("click","#api-key-submit",(function(e){if(e.preventDefault(),0==jQuery(this).next("img").length){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t))}t={action:"rtmedia_enter_api_key",apikey:jQuery("#new-api-key").val()};jQuery.getJSON(ajaxurl,t,(function(e){if(void 0===e.error&&e.apikey){var t=window.location.href,r=window.location.hash;-1===(t=t.replace(r,"")).toString().indexOf("&apikey="+e.apikey)&&(t+="&apikey="+e.apikey),-1===t.toString().indexOf("&update=true")&&(t+="&update=true"),document.location.href=t+r}else{jQuery("#settings-error-api-key-error").remove();var a={id:"settings-error-api-key-error",msg:e.error,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(a))}jQuery("#api-key-submit").next("img").remove()}))})),jQuery(document).on("click","#disable-encoding",(function(e){if(e.preventDefault(),confirm(rtmedia_admin_strings.disable_encoding)){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t));t={action:"rtmedia_disable_encoding"};jQuery.post(ajaxurl,t,(function(e){if(e){if(jQuery(".settings-error-encoding-disabled").remove(),jQuery("#settings-encoding-successfully-updated").length>0)jQuery("#settings-encoding-successfully-updated p").html(e);else{var t={id:"settings-encoding-successfully-updated",msg:e,class:"updated"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}jQuery("#rtmedia-encoding-usage").hide(),jQuery("#disable-encoding").next("img").remove(),jQuery("#disable-encoding").hide(),jQuery("#enable-encoding").show()}else{jQuery("#settings-error-encoding-disabled").remove();t={id:"settings-error-encoding-disabled",msg:rtmedia_admin_strings.something_went_wrong,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}}))}})),jQuery(document).on("click","#enable-encoding",(function(e){if(e.preventDefault(),confirm(rtmedia_admin_strings.enable_encoding)){var t={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t));t={action:"rtmedia_enable_encoding"};jQuery.post(ajaxurl,t,(function(e){if(e){if(jQuery(".settings-error-encoding-enabled").remove(),jQuery("#settings-encoding-successfully-updated").length>0)jQuery("#settings-encoding-successfully-updated p").html(e);else{var t={id:"settings-encoding-successfully-updated",msg:e,class:"updated"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}var r=jQuery("#enable-encoding");r.next("img").remove(),r.hide(),jQuery("#disable-encoding").show()}else{jQuery("#settings-error-encoding-disabled").remove();t={id:"settings-error-encoding-enabled",msg:rtmedia_admin_strings.something_went_wrong,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t))}}))}})),jQuery(".bp-media-encoding-table").on("click",".bpm-unsubscribe",(function(t){t.preventDefault(),jQuery("#bpm-unsubscribe-dialog").dialog({dialogClass:"wp-dialog",modal:!0,buttons:{Unsubscribe:function(){jQuery(this).dialog("close");var t={src:rtmedia_admin_url+"images/wpspin_light.gif"},r=e(".bpm-unsubscribe");r.after(rtMediaAdmin.templates.rtm_image(t));t={action:"rtmedia_unsubscribe_encoding_service",note:jQuery("#bpm-unsubscribe-note").val(),plan:r.attr("data-plan"),price:r.attr("data-price")};jQuery.getJSON(ajaxurl,t,(function(e){if(void 0===e.error&&e.updated){r.next().remove(),r.after(e.form),r.remove(),jQuery("#settings-unsubscribed-successfully").remove(),jQuery("#settings-unsubscribe-error").remove();var t={id:"settings-unsubscribed-successfully",msg:e.updated,class:"updated"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t)),window.location.hash="#settings-unsubscribed-successfully"}else{r.next().remove(),jQuery("#settings-unsubscribed-successfully").remove(),jQuery("#settings-unsubscribe-error").remove();t={id:"settings-unsubscribe-error",msg:e.error,class:"error"};jQuery("h2:first").after(rtMediaAdmin.templates.rtm_msg_div(t)),window.location.hash="#settings-unsubscribe-error"}}))}}})})),jQuery("#bpmedia-bpalbumimporter").on("change","#bp-album-import-accept",(function(){jQuery(".bp-album-import-accept").toggleClass("i-accept"),jQuery(".bp-album-importer-wizard").slideToggle()})),jQuery("#rtprivacyinstall").on("click",(function(e){e.preventDefault(),$progress_parent=jQuery("#rtprivacyinstaller"),$progress_parent.find(".rtprivacytype").each((function(){if($type=jQuery(this).attr("id"),"total"===$type){$values=[],jQuery(this).find("input").each((function(){$values[jQuery(this).attr("name")]=[jQuery(this).val()]})),$data={};for(var e=1;e<=$values.steps[0];e++)$count=20,e===$values.steps[0]&&($count=parseInt($values.laststep[0]),0===$count&&($count=20)),newvals={page:e,action:"rtmedia_privacy_install",count:$count,values:$values},$data[e]=newvals;var t=jQuery.Deferred();t.resolve(),jQuery.each($data,(function(e,r){t=t.pipe((function(){return function(e){return jQuery.post(ajaxurl,e,(function(t){if(0!=t){var r=!1,a=Math.ceil((20*parseInt(t)+parseInt(e.values.finished))/parseInt(e.values.total)*100);a>100&&(a=100,r=!0),jQuery("#rtprogressbar>div").css("width",a+"%"),finished=jQuery("#rtprivacyinstaller span.finished").html(),jQuery("#rtprivacyinstaller span.finished").html(parseInt(finished)+e.count),r&&jQuery.post(ajaxurl,{action:"rtmedia_privacy_redirect"},(function(e){window.location=settings_url}))}else{var i={msg:"Row "+t+" failed."};jQuery("#map_progress_msgs").html(rtMediaAdmin.templates.rtm_map_mapping_failure(i))}}))}(r)}))}))}}))})),jQuery("#bpmedia-bpalbumimport-cleanup").on("click",(function(e){e.preventDefault(),jQuery.post(ajaxurl,{action:"rtmedia_rt_album_cleanup",rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},(function(e){window.location=settings_rt_album_import_url}))})),jQuery("#bpmedia-bpalbumimporter").on("click","#bpmedia-bpalbumimport",(function(e){if(e.preventDefault(),jQuery("#bp-album-import-accept").prop("checked")){if(jQuery(this).prop("disabled",!0),wp_admin_url=ajaxurl.replace("admin-ajax.php",""),!jQuery(".bpm-ajax-loader").length){var t={src:rtmedia_admin_url+"images/wpspin_light.gif",class:"bpm-ajax-loader",norefresh:rtmedia_admin_strings.no_refresh};jQuery(this).after(rtMediaAdmin.templates.rtm_image(t))}$progress_parent=jQuery("#bpmedia-bpalbumimport"),$values=[],jQuery(this).parent().find("input").each((function(){$values[jQuery(this).attr("name")]=[jQuery(this).val()]})),0==$values.steps[0]&&($values.steps[0]=1),$data={};for(i=1;i<=$values.steps[0];i++)$count=5,i==$values.steps[0]&&($count=parseInt($values.laststep[0]),0==$count&&($count=5)),newvals={page:i,action:"rtmedia_rt_album_import",count:$count,values:$values,rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},$data[i]=newvals;var r=jQuery.Deferred();r.resolve(),jQuery.each($data,(function(e,t){r=r.pipe((function(){return function(e){return jQuery.getJSON(ajaxurl,e,(function(t){if(favorites=!1,t){var r=Math.ceil((5*parseInt(t.page)+parseInt(e.values.finished))/parseInt(e.values.total)*100);comments_total=jQuery("#bpmedia-bpalbumimporter .bp-album-comments span.total").html(),users_total=jQuery("#bpmedia-bpalbumimporter .bp-album-users span.total").html(),media_total=jQuery("#bpmedia-bpalbumimporter .bp-album-media span.total").html(),comments_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-comments span.finished").html(),users_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-users span.finished").html();var a=Math.ceil((parseInt(t.comments)+parseInt(comments_finished))/parseInt(comments_total)*100),i=Math.ceil(parseInt(t.users)/parseInt(users_total)*100);(r>100||100==r)&&(r=100,favorites=!0),jQuery(".bp-album-media #rtprogressbar>div").css("width",r+"%"),jQuery(".bp-album-comments #rtprogressbar>div").css("width",a+"%"),jQuery(".bp-album-users #rtprogressbar>div").css("width",i+"%"),media_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-media span.finished").html(),parseInt(media_finished)<parseInt(media_total)&&jQuery("#bpmedia-bpalbumimporter .bp-album-media span.finished").html(parseInt(media_finished)+e.count),jQuery("#bpmedia-bpalbumimporter .bp-album-comments span.finished").html(parseInt(t.comments)+parseInt(comments_finished)),jQuery("#bpmedia-bpalbumimporter .bp-album-users span.finished").html(parseInt(t.users)),favorites&&(favorite_data={action:"rtmedia_rt_album_import_favorites",rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},jQuery.post(ajaxurl,favorite_data,(function(e){if(!e.hasOwnProperty(favorites)||0===e.favorites&&"0"===e.favorites)window.setTimeout(s,2e3);else{if(!jQuery(".bp-album-favorites").length){var t={users:e.users};jQuery(".bp-album-comments").after(rtMediaAdmin.templates.rtm_album_favourites_importer(t))}$favorites={},0!==e.offset||"0"!==e.offset?start=1*e.offset+1:start=1;for(var r=start;r<=e.users;r++)$count=1,r===e.users&&($count=parseInt(e.users%$count),0==$count&&($count=1)),newvals={action:"rtmedia_rt_album_import_step_favorites",offset:r-1,redirect:r===e.users,rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()},$favorites[r]=newvals;var a=jQuery.Deferred();a.resolve(),jQuery.each($favorites,(function(e,t){a=a.pipe((function(){return function(e){return jQuery.post(ajaxurl,e,(function(e){redirect=!1,favorites_total=jQuery("#bpmedia-bpalbumimporter .bp-album-favorites span.total").html(),favorites_finished=jQuery("#bpmedia-bpalbumimporter .bp-album-favorites span.finished").html(),jQuery("#bpmedia-bpalbumimporter .bp-album-favorites span.finished").html(parseInt(favorites_finished)+1);var t=Math.ceil(parseInt(favorites_finished+1)/parseInt(favorites_total)*100);(t>100||100==t)&&(t=100,redirect=!0),jQuery(".bp-album-favorites #rtprogressbar>div").css("width",t+"%"),redirect&&window.setTimeout(s,2e3)}))}(t)}))}))}}),"json"))}else if(e.hasOwnProperty(page)){var n={msg:"Row "+t.page+" failed."};jQuery("#map_progress_msgs").html(rtMediaAdmin.templates.rtm_map_mapping_failure(n))}else n={msg:rtmedia_admin_strings.request_failed},jQuery("#map_progress_msgs").html(rtMediaAdmin.templates.rtm_map_mapping_failure(n))}))}(t)}))}))}else{jQuery("html, body").animate({scrollTop:jQuery("#bp-album-import-accept").offset().top},500);var a=jQuery(".bp-album-import-accept"),i=3;(function e(){a.css("background-color","#EE0000"),setTimeout((function(){a.css("background-color","#FFEBE8"),--i&&setTimeout(e,500)}),500)})()}})),r.on("click",".interested",(function(){jQuery(".interested-container").removeClass("hidden"),jQuery(".choice-free").attr("required","required")})),r.on("click",".not-interested",(function(){jQuery(".interested-container").addClass("hidden"),jQuery(".choice-free").removeAttr("required")})),jQuery("#video-transcoding-main-container").on("click",".video-transcoding-survey",(function(e){e.preventDefault();var t={action:"rtmedia_convert_videos_form",email:jQuery(".email").val(),url:jQuery(".url").val(),choice:jQuery('input[name="choice"]:checked').val(),interested:jQuery('input[name="interested"]:checked').val(),wp_nonce:RTMedia_Admin_Settings_JS?.rtmedia_buddypress_convert_nonce??""};return jQuery.post(ajaxurl,t,(function(e){var t={msg:e,strong:"yes"};jQuery("#video-transcoding-main-container").html(rtMediaAdmin.templates.rtm_p_tag(t))})),!1})),jQuery("#bpmedia-bpalbumimporter").on("click",".deactivate-bp-album",(function(e){e.preventDefault(),$bpalbum=jQuery(this);var t={action:"rtmedia_rt_album_deactivate",rtm_wpnonce:jQuery("#bpaimporter_wpnonce").val()};jQuery.get(ajaxurl,t,(function(e){if(e)location.reload();else{var t={msg:rtmedia_admin_strings.something_went_wrong};$bpalbum.parent().after(rtMediaAdmin.templates.rtm_p_tag(t))}}))})),jQuery(".updated").on("click",".bpm-hide-encoding-notice",(function(){var e={src:rtmedia_admin_url+"images/wpspin_light.gif"};jQuery(this).after(rtMediaAdmin.templates.rtm_image(e));e={action:"rtmedia_hide_encoding_notice"};jQuery.post(ajaxurl,e,(function(e){e&&jQuery(".bpm-hide-encoding-notice").closest(".updated").remove()}))})),jQuery("#rtmedia-bp-enable-activity").is(":checked")?jQuery(".rtmedia-bp-activity-setting").prop("readonly",!1):jQuery(".rtmedia-bp-activity-setting").prop("readonly",!0),jQuery("#rtmedia-bp-enable-activity").on("click",(function(e){jQuery(this).is(":checked")?jQuery(".rtmedia-bp-activity-setting").prop("readonly",!1):jQuery(".rtmedia-bp-activity-setting").prop("readonly",!0)}));var o;function m(e,t){var r=jQuery(e);r.focus(),r.css("border-color","red");var a=r.parent();if(a.length>0&&"error_msg"!==a.attr("class")){var i=jQuery("<span />").attr("style","display:block").addClass("error_msg").html(t);r.after(i)}return return_code=!1,!1}void 0!==rtmedia_on_label&&rtmedia_on_label,void 0!==rtmedia_off_label&&rtmedia_off_label,jQuery("input[type=file]").on("change",(function(e){o=e.target.files,function(e){e.stopPropagation(),e.preventDefault();var t=new FormData;void 0!==e&&void 0!==e.target&&void 0!==e.target.name&&"rtFileInput"===e.target.name&&t.append("import_export_control",e.target.name);jQuery.each(o,(function(e,r){t.append(e,r)}));var r=jQuery("#rtmedia_admin_upload_nonce").val();void 0!==r&&""!==r&&t.append("rtmedia_admin_upload_nonce",r);t.append("action","rtmedia_admin_upload"),jQuery.ajax({url:rtmedia_admin_ajax,type:"POST",data:t,cache:!1,processData:!1,contentType:!1,success:function(e){if(e.hasOwnProperty("rtm_response")&&e.hasOwnProperty("rtm_response_msg")){jQuery("#rtm-setting-msg").remove();var t=jQuery("<div/>",{id:"rtm-setting-msg",class:"rtm-fly-warning"});"success"===e.rtm_response?(t.addClass("rtm-success rtm-save-settings-msg"),t.text(e.rtm_response_msg),jQuery(".rtm-button-container.top").append(t),location.reload()):"error"===e.rtm_response&&(t.addClass("rtm-warning"),t.text(e.rtm_response_msg),jQuery(".rtm-button-container.top").append(t),t.delay(3e3).fadeOut(100))}else if(void 0===e.error){if("string"==typeof e&&(e=JSON.parse(e)),e.exceed_size_msg)return jQuery("#debuglog").val(""),alert(e.exceed_size_msg),!1;jQuery("#debuglog_temp_path").val(e.debug_attachmanet)}else jQuery("#debuglog").val(""),alert("ERRORS: "+e.error)}})}(e)})),jQuery("#rtmedia-submit-request").on("click",(function(){var t=jQuery("#name").val(),r=jQuery("#email").val(),a=jQuery("#website").val(),i=jQuery("#subject").val(),n=jQuery("#details").val(),s=jQuery('input[name="request_type"]').val(),o=jQuery('input[name="request_id"]').val(),m=jQuery('input[name="server_address"]').val(),d=jQuery('input[name="ip_address"]').val(),u=jQuery('input[name="server_type"]').val(),l=jQuery('input[name="user_agent"]').val(),p={name:t,email:r,website:a,subject:i,details:n,request_id:o,request_type:"premium_support",server_address:m,ip_address:d,server_type:u,user_agent:l,debuglog_temp_path:jQuery('input[name="debuglog_temp_path"]').val()};if("bug_report"==s){var c=jQuery("#wp_admin_username").val();if(""===c)return alert(rtmedia_admin_support_strings.wp_admin_username_error),!1;var _=jQuery("#wp_admin_pwd").val();if(""===_)return alert(rtmedia_admin_support_strings.wp_admin_pwd_error),!1;var f=jQuery("#ssh_ftp_host").val();if(""===f)return alert(rtmedia_admin_support_strings.ssh_ftp_host_error),!1;var v=jQuery("#ssh_ftp_username").val();if(""===v)return alert(rtmedia_admin_support_strings.ssh_ftp_username_error),!1;var g=jQuery("#ssh_ftp_pwd").val();if(""===g)return alert(rtmedia_admin_support_strings.ssh_ftp_pwd_error),!1;p={name:t,email:r,website:a,subject:i,details:n,request_id:o,request_type:"premium_support",server_address:m,ip_address:d,server_type:u,user_agent:l,wp_admin_username:c,wp_admin_pwd:_,ssh_ftp_host:f,ssh_ftp_username:v,ssh_ftp_pwd:g}}for(formdata in p){if(""===p[formdata]&&"debuglog_temp_path"!==formdata)return alert("Please enter "+formdata.replace("_"," ")+" field."),!1;if(""===p[formdata]&&"debuglog_temp_path"===formdata)return alert("Please upload attachment."),!1}return data={action:"rtmedia_submit_request",form_data:p,support_wpnonce:jQuery("#support_wpnonce").val()},jQuery.post(ajaxurl,data,(function(t){if("false"==(t=t.trim()))return alert(rtmedia_admin_support_strings.all_fields_error),!1;e("#rtmedia_service_contact_container").empty(),e("#rtmedia_service_contact_container").append(t)})),!1})),jQuery("#cancel-request").on("click",(function(){return!1})),jQuery(".rtm_enable_masonry_view input[type=checkbox]").is(":checked")?jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").show():jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").hide(),jQuery(".rtm_enable_masonry_view input[type=checkbox]").on("click",(function(e){jQuery(this).is(":checked")?jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").show():jQuery(".rtm_enable_masonry_view").parents(".metabox-holder").find(".rtmedia-info").hide()})),jQuery("#rtm-masonry-change-thumbnail-info").on("click",(function(e){jQuery("html, body").animate({scrollTop:0},"500","swing")})),jQuery("#rtm-export-button").on("click",(function(){data={action:"rtmedia_export_settings"},jQuery.post(ajaxurl,data,(function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","rtm-settings.json"),jQuery("body").append(r),r.click(),r.remove()}))})),jQuery("#rtm-export-data-button").on("click",(function(){window.location.href="/wp-admin/tools.php?page=export_personal_data"})),jQuery("#rtm-erase-data-button").on("click",(function(){window.location.href="/wp-admin/tools.php?page=remove_personal_data"}))})),jQuery(window).on("load",(function(){jQuery(".rtmedia-addon-thickbox").trigger("click")}));