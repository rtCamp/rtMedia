jQuery(document).ready((function(e){var t=document.createElement("div");t.setAttribute("class","rtm-warning rtm-fly-warning hide"),e(".rtm-tabs").rtTab(),e('input[name^="rtmedia-options"]').on("change",(function(){e(".rtm-save-settings-msg").remove(),0===e(".rtm-fly-warning").length&&(t.innerText=rtmedia_admin_strings.settings_changed,e(".rtm-button-container.top").prepend(t),e(".rtm-fly-warning").slideDown())})),e(".rtm-img-size-setting .form-table tr:nth-child(7) td:last-child").attr("colspan","3"),e(".rtm-field-wrap .switch input[type=checkbox]").each((function(){var t=e(this);t.parents("table").attr("data-depends")||(t.is(":checked")?(t.parents("table").next(".rtm-notice").slideDown(),t.parents("table").siblings("table").each((function(){e(this).attr("data-depends")&&e(this).slideDown()}))):(t.parents("table").next(".rtm-notice").slideUp(),t.parents("table").siblings("table").each((function(){e(this).attr("data-depends")&&e(this).slideUp()})))),t.parents("tr").next("tr").attr("data-depends")&&(t.is(":checked")?t.parents("tr").next("tr").slideDown():t.parents("tr").next("tr").slideUp())})),e(".rtm-field-wrap .switch input[type=checkbox]").on("change",(function(){var t=e(this);t.parents("table").attr("data-depends")||(t.parents("table").next(".rtm-notice").slideToggle(),t.parents("table").siblings("table").each((function(){e(this).attr("data-depends")&&e(this).slideToggle()}))),t.parents("tr").next("tr").attr("data-depends")&&t.parents("tr").next("tr").slideToggle()}));new(Backbone.View.extend({el:e(".bp-media-admin"),events:{"click .rtm-theme":"render","click .rtm-close":"close","click .rtm-previous":"previousTheme","click .rtm-next":"nextTheme",keyup:"keyEvent"},initialize:function(){_.bindAll(this,"render","close","nextTheme","previousTheme","keyEvent"),this.keyEvent()},render:function(t){e(".rtm-theme").removeClass("rtm-modal-open");var r=e(t.currentTarget).addClass("rtm-modal-open").find(".rtm-theme-content").html();if(e(".rtm-theme-overlay")[0])e(".rtm-theme-overlay").show(),e(this.el).find(".rtm-theme-content-wrap").empty().append(r);else{var n={themeContent:r};e(this.el).append(rtMediaAdmin.templates.rtm_theme_overlay(n))}e(t.currentTarget).is(":first-child")?e(".rtm-previous").addClass("disabled"):e(t.currentTarget).is(":last-child")?e(".rtm-next").addClass("disabled"):e(".rtm-next, .rtm-previous").removeClass("disabled")},close:function(){e(".rtm-theme").removeClass("rtm-modal-open"),e(".rtm-theme-overlay").hide(),e(".rtm-next, .rtm-previous").removeClass("disabled")},nextTheme:function(t){return e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:last-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").next().trigger("click"),!1},previousTheme:function(t){return e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:first-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").prev().trigger("click"),!1},keyEvent:function(){e("body").on("keyup",(function(t){return 39===t.keyCode?(e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:last-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").next().trigger("click"),!1):37===t.keyCode?(e(".rtm-next, .rtm-previous").removeClass("disabled"),e(".rtm-theme:first-child").hasClass("rtm-modal-open")&&e(t.currentTarget).addClass("disabled"),e(".rtm-modal-open").prev().trigger("click"),!1):void(27===t.keyCode&&e(".rtm-close").trigger("click"))}))}}));jQuery("#rtm-licenses .regular-text").each((function(){jQuery(this).keypress((function(e){if("13"==(e.keyCode?e.keyCode:e.which))return!1}))})),jQuery("#bp_media_settings_form").on("submit",(function(e){jQuery("#rtcss-notice").remove();var t=jQuery("#rtmedia-custom-css").val().match(/@import\s*(url)?\s*\(?([^;]+?)\)?;/);if(null!=t&&null!=t[0])return jQuery("#rtmedia-custom-css").after('<div id="rtcss-notice" class="error"><p>'+rtmedia_admin_strings.wrong_css_input+"</p></div>"),!1}))}));