var rtmediaTermsConditionsElement;function rtp_display_terms_warning(e,t){if(0===jQuery(".rt_alert_msg").length){var r=jQuery("<span />").attr("style","color:red; display:block; clear:both;").addClass("rt_alert_msg").empty().append(t);e.after(r)}}function handle_privacy_message(){jQuery("#close_rtm_privacy_message").on("click",(function(){var e=jQuery(".privacy_message_wrapper");e.fadeOut("slow",(function(){e.remove(),jQuery.cookie("rtm_show_privacy_message","view",{expires:1,path:"/"})}))}))}"object"==typeof rtMediaHook&&(rtMediaHook.register("rtmedia_js_before_upload",(function(e){if(!e)return e;if(void 0===e.uploader||void 0===e.uploader.settings||void 0===e.uploader.settings.multipart_params||void 0===e.src)return"boolean"!=typeof e||e;var t=e.uploader.settings.multipart_params,r=!1,a=!1,d=!1;if("activity"===e.src?(r="activity_terms_condition_request",a="activity_terms_condition","true"===rtmedia_upload_terms_data.activity_terms_enabled&&(d=!0)):"uploader"===e.src&&(r="uploader_terms_condition_request",a="uploader_terms_condition","true"===rtmedia_upload_terms_data.uploader_terms_enabled&&(d=!0)),!d)return!0;if(r&&a&&d)if(t[r]="true",rtmediaTermsConditionsElement&&rtmediaTermsConditionsElement.length>0)t[a]=rtmediaTermsConditionsElement.prop("checked")?"true":"false";else{var i=$("#rtmedia_upload_terms_conditions");i.length>0&&(rtmediaTermsConditionsElement=i,t[a]=i.prop("checked")?"true":"false")}return e.uploader.settings.multipart_params=t,!0})),rtMediaHook.register("rtmedia_js_upload_file",(function(e){if(!e)return e;var t=!1;!1!==e&&void 0!==e.src&&(t=e.src);var r=!1,a=!1,d=jQuery("#rtmedia_upload_terms_conditions");return"uploader"===t?(r=0===d.length?jQuery("#drag-drop-area"):d.parent(".rtmedia-upload-terms"),("undefined"!=typeof rtmedia_upload_terms_data&&void 0===rtmedia_upload_terms_data.uploader_terms_enabled||"true"===rtmedia_upload_terms_data.uploader_terms_enabled)&&(a=!0)):"activity"===t?(r=0===d.length?jQuery("#whats-new-options"):d.parent(".rtmedia-upload-terms"),"true"===rtmedia_upload_terms_data.activity_terms_enabled&&(a=!0)):jQuery("#drag-drop-area").length&&(r=0===d.length?jQuery("#drag-drop-area"):d.parent(".rtmedia-upload-terms"),("undefined"!=typeof rtmedia_upload_terms_data&&void 0===rtmedia_upload_terms_data.uploader_terms_enabled||"true"===rtmedia_upload_terms_data.uploader_terms_enabled)&&(a=!0)),a?0===d.length?(rtp_display_terms_warning(r,rtmedia_upload_terms_data.message),!1):(rtmediaTermsConditionsElement=d,!!d.prop("checked")||(rtp_display_terms_warning(r,rtmedia_upload_terms_data.message),!1)):"boolean"!=typeof e||e})),rtMediaHook.register("rtmedia_js_before_activity_added",(function(e){var t,r,a=jQuery("#aw-whats-new-submit");if(e&&"activity"===e.src){if("false"===rtmedia_upload_terms_data.activity_terms_enabled)return!0;t=(r=jQuery("#whats-new-form")).find("#rtmedia_upload_terms_conditions")}else t=jQuery("#rtmedia_upload_terms_conditions");return 1!==t.length?(rtp_display_terms_warning(r.find("#whats-new-options"),rtmedia_upload_terms_data.message),!1):(t.removeAttr("disabled"),rtmediaTermsConditionsElement=t,!1===e?(a.removeAttr("disabled"),a.removeClass("loading"),e):t.is(":checked")?(t.prop("disabled",!0),!0):(a.removeAttr("disabled"),a.removeClass("loading"),e&&"activity"===e.src?rtp_display_terms_warning(r.find(".rtmedia-upload-terms"),rtmedia_upload_terms_data.message):rtp_display_terms_warning(t.parent(".rtmedia-upload-terms"),rtmedia_upload_terms_data.message),!1))})),rtMediaHook.register("rtmedia_js_after_file_upload",(function(){var e=jQuery("#rtmedia-upload-container #rtmedia_upload_terms_conditions");return 1===e.length&&(e.removeAttr("checked"),jQuery(".rt_alert_msg").remove()),!0})),rtMediaHook.register("rtmedia_js_after_activity_added",(function(){return jQuery("#rtmedia_upload_terms_conditions").removeAttr("checked").removeAttr("disabled"),!0}))),jQuery(document).ready((function(){var e=jQuery("#rtmedia_upload_terms_conditions");jQuery.ajaxPrefilter((function(t,r,a){return void 0===t||void 0===t.data||void 0===r||void 0===r.data||null===r.data||"post_update"===r.data.action&&e.length&&(t.data+="&rtmedia_upload_terms_conditions="+e.prop("checked")),!0})),e.on("click",(function(){var t=jQuery(".start-media-upload");if(t.focus(),e.is(":checked")){var r=e.siblings("span.rt_alert_msg");1===r.length?r.remove():e.parent().siblings("span.rt_alert_msg").remove()}else rtp_display_terms_warning(e.parent(".rtmedia-upload-terms"),rtmedia_upload_terms_data.message);if("undefined"!=typeof rtmedia_direct_upload_enabled&&"1"===rtmedia_direct_upload_enabled){var a=jQuery("#aw-whats-new-submit");a.length?(""!==jQuery("#whats-new").val().trim()||jQuery("#rtmedia_uploader_filelist").children("li").length)&&a.trigger("click"):t.trigger("click")}})),handle_privacy_message()}));